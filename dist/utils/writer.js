"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.writeJson=exports.respondWithCode=void 0;var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var _this=void 0;var ResponsePayload=function ResponsePayload(code,payload){_this.code=code;_this.payload=payload};var respondWithCode=function respondWithCode(code,payload){return new ResponsePayload(code,payload)};exports.respondWithCode=respondWithCode;var writeJson=function writeJson(response,arg1,arg2){var code;var payload;if(arg1&&arg1 instanceof ResponsePayload){writeJson(response,arg1.payload,arg1.code);return}if(arg2&&Number.isInteger(arg2)){code=arg2}else{if(arg1&&Number.isInteger(arg1)){code=arg1}}if(code&&arg1){payload=arg1}else if(arg1){payload=arg1}if(!code){// if no response code given, we default to 200
code=200}if((0,_typeof2["default"])(payload)==="object"){payload=JSON.stringify(payload,null,2)}response.writeHead(code,{"Content-Type":"application/json"});response.end(payload)};exports.writeJson=writeJson;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy93cml0ZXIuanMiXSwibmFtZXMiOlsiUmVzcG9uc2VQYXlsb2FkIiwiY29kZSIsInBheWxvYWQiLCJyZXNwb25kV2l0aENvZGUiLCJ3cml0ZUpzb24iLCJyZXNwb25zZSIsImFyZzEiLCJhcmcyIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiSlNPTiIsInN0cmluZ2lmeSIsIndyaXRlSGVhZCIsImVuZCJdLCJtYXBwaW5ncyI6InlTQUFBLEdBQUlBLENBQUFBLGVBQWUsQ0FBRyxRQUFsQkEsQ0FBQUEsZUFBa0IsQ0FBQ0MsSUFBRCxDQUFPQyxPQUFQLENBQW1CLENBQ3hDLEtBQUksQ0FBQ0QsSUFBTCxDQUFZQSxJQUFaLENBQ0EsS0FBSSxDQUFDQyxPQUFMLENBQWVBLE9BQ2YsQ0FIRCxDQUtBLEdBQU1DLENBQUFBLGVBQWUsQ0FBRyxRQUFsQkEsQ0FBQUEsZUFBa0IsQ0FBQ0YsSUFBRCxDQUFPQyxPQUFQLENBQW1CLENBQzFDLE1BQU8sSUFBSUYsQ0FBQUEsZUFBSixDQUFvQkMsSUFBcEIsQ0FBMEJDLE9BQTFCLENBQ1AsQ0FGRCxDLHdDQUlBLEdBQUlFLENBQUFBLFNBQVMsQ0FBRyxRQUFaQSxDQUFBQSxTQUFZLENBQUNDLFFBQUQsQ0FBV0MsSUFBWCxDQUFpQkMsSUFBakIsQ0FBMEIsQ0FDekMsR0FBSU4sQ0FBQUEsSUFBSixDQUNBLEdBQUlDLENBQUFBLE9BQUosQ0FFQSxHQUFJSSxJQUFJLEVBQUlBLElBQUksV0FBWU4sQ0FBQUEsZUFBNUIsQ0FBNkMsQ0FDNUNJLFNBQVMsQ0FBQ0MsUUFBRCxDQUFXQyxJQUFJLENBQUNKLE9BQWhCLENBQXlCSSxJQUFJLENBQUNMLElBQTlCLENBQVQsQ0FDQSxNQUNBLENBRUQsR0FBSU0sSUFBSSxFQUFJQyxNQUFNLENBQUNDLFNBQVAsQ0FBaUJGLElBQWpCLENBQVosQ0FBb0MsQ0FDbkNOLElBQUksQ0FBR00sSUFDUCxDQUZELElBR0ssQ0FDSixHQUFJRCxJQUFJLEVBQUlFLE1BQU0sQ0FBQ0MsU0FBUCxDQUFpQkgsSUFBakIsQ0FBWixDQUFvQyxDQUNuQ0wsSUFBSSxDQUFHSyxJQUNQLENBQ0QsQ0FDRCxHQUFJTCxJQUFJLEVBQUlLLElBQVosQ0FBa0IsQ0FDakJKLE9BQU8sQ0FBR0ksSUFDVixDQUZELElBR0ssSUFBSUEsSUFBSixDQUFVLENBQ2RKLE9BQU8sQ0FBR0ksSUFDVixDQUVELEdBQUksQ0FBQ0wsSUFBTCxDQUFXLENBQ1Y7QUFDQUEsSUFBSSxDQUFHLEdBQ1AsQ0FDRCxHQUFJLHdCQUFPQyxPQUFQLElBQW1CLFFBQXZCLENBQWlDLENBQ2hDQSxPQUFPLENBQUdRLElBQUksQ0FBQ0MsU0FBTCxDQUFlVCxPQUFmLENBQXdCLElBQXhCLENBQThCLENBQTlCLENBQ1YsQ0FDREcsUUFBUSxDQUFDTyxTQUFULENBQW1CWCxJQUFuQixDQUF5QixDQUFDLGVBQWdCLGtCQUFqQixDQUF6QixFQUNBSSxRQUFRLENBQUNRLEdBQVQsQ0FBYVgsT0FBYixDQUNBLENBakNELEMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgUmVzcG9uc2VQYXlsb2FkID0gKGNvZGUsIHBheWxvYWQpID0+IHtcclxuXHR0aGlzLmNvZGUgPSBjb2RlO1xyXG5cdHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7XHJcbn07XHJcblxyXG5jb25zdCByZXNwb25kV2l0aENvZGUgPSAoY29kZSwgcGF5bG9hZCkgPT4ge1xyXG5cdHJldHVybiBuZXcgUmVzcG9uc2VQYXlsb2FkKGNvZGUsIHBheWxvYWQpO1xyXG59O1xyXG5cclxubGV0IHdyaXRlSnNvbiA9IChyZXNwb25zZSwgYXJnMSwgYXJnMikgPT4ge1xyXG5cdGxldCBjb2RlO1xyXG5cdGxldCBwYXlsb2FkO1xyXG5cclxuXHRpZiAoYXJnMSAmJiBhcmcxIGluc3RhbmNlb2YgUmVzcG9uc2VQYXlsb2FkKSB7XHJcblx0XHR3cml0ZUpzb24ocmVzcG9uc2UsIGFyZzEucGF5bG9hZCwgYXJnMS5jb2RlKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGlmIChhcmcyICYmIE51bWJlci5pc0ludGVnZXIoYXJnMikpIHtcclxuXHRcdGNvZGUgPSBhcmcyO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdGlmIChhcmcxICYmIE51bWJlci5pc0ludGVnZXIoYXJnMSkpIHtcclxuXHRcdFx0Y29kZSA9IGFyZzE7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChjb2RlICYmIGFyZzEpIHtcclxuXHRcdHBheWxvYWQgPSBhcmcxO1xyXG5cdH1cclxuXHRlbHNlIGlmIChhcmcxKSB7XHJcblx0XHRwYXlsb2FkID0gYXJnMTtcclxuXHR9XHJcblxyXG5cdGlmICghY29kZSkge1xyXG5cdFx0Ly8gaWYgbm8gcmVzcG9uc2UgY29kZSBnaXZlbiwgd2UgZGVmYXVsdCB0byAyMDBcclxuXHRcdGNvZGUgPSAyMDA7XHJcblx0fVxyXG5cdGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIikge1xyXG5cdFx0cGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpO1xyXG5cdH1cclxuXHRyZXNwb25zZS53cml0ZUhlYWQoY29kZSwge1wiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwifSk7XHJcblx0cmVzcG9uc2UuZW5kKHBheWxvYWQpO1xyXG59O1xyXG5cclxuZXhwb3J0IHtyZXNwb25kV2l0aENvZGUsIHdyaXRlSnNvbn07XHJcbiJdfQ==