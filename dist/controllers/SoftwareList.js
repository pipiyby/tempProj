"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.deleteMasterList=exports.updateMasterList=exports.getMasterList=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _writer=require("../utils/writer");var _ClientBalanceService=require("../service/ClientBalanceService");var _v=_interopRequireDefault(require("uuid/v4"));var _StubClientBalanceService=require("../service/StubClientBalanceService");var _helper=require("../utils/helper");var _errors=require("../errors");// eslint-disable-next-line no-unused-vars
var getMasterList=/*#__PURE__*/function(){var _ref=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee(req,res,next){var authorization,accountNumber,correlationId,whichService,fnStartTime,transactionId,response,fnElapsedTime,_fnElapsedTime,errorObject,errorMsg;return _regenerator["default"].wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Please trim the values from request. There is a weird bug where a space is added from request package when call is coming from other micro-service.
authorization=req.swagger.params["Authorization"].value;accountNumber=req.swagger.params["accountNumber"].value;// Trim in done before db call or rkey call
correlationId=req.swagger.params["correlationId"].value;//Check if stub is enabled (Stub flag is set for only NP1 deploy) Disabled as data is available in NP1.
whichService=_ClientBalanceService.retrieveClientBalanceService;if(process.env.STUB==="true"){whichService=_StubClientBalanceService.stubClientBalanceService}fnStartTime=Date.now();transactionId=(0,_v["default"])();res.setHeader("correlationId",correlationId?correlationId:"");res.setHeader("transactionId",transactionId);_context.prev=9;_context.next=12;return whichService(authorization,accountNumber,transactionId,correlationId);case 12:response=_context.sent;(0,_writer.writeJson)(res,response);fnElapsedTime=Date.now()-fnStartTime+"ms";global.logger.info("Served retrieveClientBalance",{fnElapsedTime:fnElapsedTime,operationName:"controller",transactionId:transactionId,correlationId:correlationId});_context.next=22;break;case 18:_context.prev=18;_context.t0=_context["catch"](9);_fnElapsedTime=Date.now()-fnStartTime+"ms";// Create a proper structured response and send it to the client
if(_context.t0.errorResponse){errorObject=_context.t0.errorResponse;errorObject.name=(0,_helper.empty)(_context.t0.name)?"Execution Error":_context.t0.name;(0,_writer.writeJson)(res,errorObject,_context.t0.statusCode);global.logger.error("Predefined Runtime Error.",{fnElapsedTime:_fnElapsedTime,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context.t0})}else{global.logger.error("Dynamic Runtime Error.",{fnElapsedTime:_fnElapsedTime,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context.t0.stack});errorMsg={code:50000,message:"Runtime error. Contact API Team with correlationId and transactionId",fields:[]};(0,_writer.writeJson)(res,new _errors.RunTimeError(global.httpStatusCodes.INTERNAL_SERVER_ERROR,"Runtime error",errorMsg),500)}case 22:case"end":return _context.stop();}}},_callee,null,[[9,18]])}));return function getMasterList(_x,_x2,_x3){return _ref.apply(this,arguments)}}();exports.getMasterList=getMasterList;var updateMasterList=/*#__PURE__*/function(){var _ref2=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2(req,res,next){var authorization,accountNumber,correlationId,whichService,fnStartTime,transactionId,response,fnElapsedTime,_fnElapsedTime2,errorObject,errorMsg;return _regenerator["default"].wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Please trim the values from request. There is a weird bug where a space is added from request package when call is coming from other micro-service.
authorization=req.swagger.params["Authorization"].value;accountNumber=req.swagger.params["accountNumber"].value;// Trim in done before db call or rkey call
correlationId=req.swagger.params["correlationId"].value;//Check if stub is enabled (Stub flag is set for only NP1 deploy) Disabled as data is available in NP1.
whichService=_ClientBalanceService.retrieveClientBalanceService;if(process.env.STUB==="true"){whichService=_StubClientBalanceService.stubClientBalanceService}fnStartTime=Date.now();transactionId=(0,_v["default"])();res.setHeader("correlationId",correlationId?correlationId:"");res.setHeader("transactionId",transactionId);_context2.prev=9;_context2.next=12;return whichService(authorization,accountNumber,transactionId,correlationId);case 12:response=_context2.sent;(0,_writer.writeJson)(res,response);fnElapsedTime=Date.now()-fnStartTime+"ms";global.logger.info("Served retrieveClientBalance",{fnElapsedTime:fnElapsedTime,operationName:"controller",transactionId:transactionId,correlationId:correlationId});_context2.next=22;break;case 18:_context2.prev=18;_context2.t0=_context2["catch"](9);_fnElapsedTime2=Date.now()-fnStartTime+"ms";// Create a proper structured response and send it to the client
if(_context2.t0.errorResponse){errorObject=_context2.t0.errorResponse;errorObject.name=(0,_helper.empty)(_context2.t0.name)?"Execution Error":_context2.t0.name;(0,_writer.writeJson)(res,errorObject,_context2.t0.statusCode);global.logger.error("Predefined Runtime Error.",{fnElapsedTime:_fnElapsedTime2,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context2.t0})}else{global.logger.error("Dynamic Runtime Error.",{fnElapsedTime:_fnElapsedTime2,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context2.t0.stack});errorMsg={code:50000,message:"Runtime error. Contact API Team with correlationId and transactionId",fields:[]};(0,_writer.writeJson)(res,new _errors.RunTimeError(global.httpStatusCodes.INTERNAL_SERVER_ERROR,"Runtime error",errorMsg),500)}case 22:case"end":return _context2.stop();}}},_callee2,null,[[9,18]])}));return function updateMasterList(_x4,_x5,_x6){return _ref2.apply(this,arguments)}}();exports.updateMasterList=updateMasterList;var deleteMasterList=/*#__PURE__*/function(){var _ref3=(0,_asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee3(req,res,next){var authorization,accountNumber,correlationId,whichService,fnStartTime,transactionId,response,fnElapsedTime,_fnElapsedTime3,errorObject,errorMsg;return _regenerator["default"].wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// Please trim the values from request. There is a weird bug where a space is added from request package when call is coming from other micro-service.
authorization=req.swagger.params["Authorization"].value;accountNumber=req.swagger.params["accountNumber"].value;// Trim in done before db call or rkey call
correlationId=req.swagger.params["correlationId"].value;//Check if stub is enabled (Stub flag is set for only NP1 deploy) Disabled as data is available in NP1.
whichService=_ClientBalanceService.retrieveClientBalanceService;if(process.env.STUB==="true"){whichService=_StubClientBalanceService.stubClientBalanceService}fnStartTime=Date.now();transactionId=(0,_v["default"])();res.setHeader("correlationId",correlationId?correlationId:"");res.setHeader("transactionId",transactionId);_context3.prev=9;_context3.next=12;return whichService(authorization,accountNumber,transactionId,correlationId);case 12:response=_context3.sent;(0,_writer.writeJson)(res,response);fnElapsedTime=Date.now()-fnStartTime+"ms";global.logger.info("Served retrieveClientBalance",{fnElapsedTime:fnElapsedTime,operationName:"controller",transactionId:transactionId,correlationId:correlationId});_context3.next=22;break;case 18:_context3.prev=18;_context3.t0=_context3["catch"](9);_fnElapsedTime3=Date.now()-fnStartTime+"ms";// Create a proper structured response and send it to the client
if(_context3.t0.errorResponse){errorObject=_context3.t0.errorResponse;errorObject.name=(0,_helper.empty)(_context3.t0.name)?"Execution Error":_context3.t0.name;(0,_writer.writeJson)(res,errorObject,_context3.t0.statusCode);global.logger.error("Predefined Runtime Error.",{fnElapsedTime:_fnElapsedTime3,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context3.t0})}else{global.logger.error("Dynamic Runtime Error.",{fnElapsedTime:_fnElapsedTime3,operationName:"controller",correlationId:correlationId,transactionId:transactionId,stackTrace:_context3.t0.stack});errorMsg={code:50000,message:"Runtime error. Contact API Team with correlationId and transactionId",fields:[]};(0,_writer.writeJson)(res,new _errors.RunTimeError(global.httpStatusCodes.INTERNAL_SERVER_ERROR,"Runtime error",errorMsg),500)}case 22:case"end":return _context3.stop();}}},_callee3,null,[[9,18]])}));return function deleteMasterList(_x7,_x8,_x9){return _ref3.apply(this,arguments)}}();exports.deleteMasterList=deleteMasterList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVycy9Tb2Z0d2FyZUxpc3QuanMiXSwibmFtZXMiOlsiZ2V0TWFzdGVyTGlzdCIsInJlcSIsInJlcyIsIm5leHQiLCJhdXRob3JpemF0aW9uIiwic3dhZ2dlciIsInBhcmFtcyIsInZhbHVlIiwiYWNjb3VudE51bWJlciIsImNvcnJlbGF0aW9uSWQiLCJ3aGljaFNlcnZpY2UiLCJyZXRyaWV2ZUNsaWVudEJhbGFuY2VTZXJ2aWNlIiwicHJvY2VzcyIsImVudiIsIlNUVUIiLCJzdHViQ2xpZW50QmFsYW5jZVNlcnZpY2UiLCJmblN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJ0cmFuc2FjdGlvbklkIiwic2V0SGVhZGVyIiwicmVzcG9uc2UiLCJmbkVsYXBzZWRUaW1lIiwiZ2xvYmFsIiwibG9nZ2VyIiwiaW5mbyIsIm9wZXJhdGlvbk5hbWUiLCJlcnJvclJlc3BvbnNlIiwiZXJyb3JPYmplY3QiLCJuYW1lIiwic3RhdHVzQ29kZSIsImVycm9yIiwic3RhY2tUcmFjZSIsInN0YWNrIiwiZXJyb3JNc2ciLCJjb2RlIiwibWVzc2FnZSIsImZpZWxkcyIsIlJ1blRpbWVFcnJvciIsImh0dHBTdGF0dXNDb2RlcyIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsInVwZGF0ZU1hc3Rlckxpc3QiLCJkZWxldGVNYXN0ZXJMaXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxhLDRZQUVBLHVDQUNBLHFFQUNBLGtEQUNBLDZFQUNBLHVDQUNBLGlDQUVBO0FBQ0EsR0FBTUEsQ0FBQUEsYUFBYSw4R0FBRyxpQkFBT0MsR0FBUCxDQUFZQyxHQUFaLENBQWlCQyxJQUFqQixzUUFDckI7QUFDSUMsYUFGaUIsQ0FFREgsR0FBRyxDQUFDSSxPQUFKLENBQVlDLE1BQVosQ0FBbUIsZUFBbkIsRUFBb0NDLEtBRm5DLENBR2pCQyxhQUhpQixDQUdEUCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsTUFBWixDQUFtQixlQUFuQixFQUFvQ0MsS0FIbkMsQ0FHMEM7QUFDM0RF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QUFvQyxhQUFFQSxJQUF6RCxDQUNBLHNCQUFVM0IsR0FBVixDQUFlMEIsV0FBZixDQUE0QixhQUFFRSxVQUE5QixFQUNBUCxNQUFNLENBQUNDLE1BQVAsQ0FBY08sS0FBZCxDQUFvQiwyQkFBcEIsQ0FBaUQsQ0FDaERULGFBQWEsQ0FBYkEsZUFEZ0QsQ0FFaERJLGFBQWEsQ0FBRSxZQUZpQyxDQUdoRGpCLGFBQWEsQ0FBYkEsYUFIZ0QsQ0FJaERVLGFBQWEsQ0FBYkEsYUFKZ0QsQ0FLaERhLFVBQVUsYUFMc0MsQ0FBakQsQ0FPQSxDQVhELElBV08sQ0FDTlQsTUFBTSxDQUFDQyxNQUFQLENBQWNPLEtBQWQsQ0FBb0Isd0JBQXBCLENBQThDLENBQzdDVCxhQUFhLENBQWJBLGVBRDZDLENBRTdDSSxhQUFhLENBQUUsWUFGOEIsQ0FHN0NqQixhQUFhLENBQWJBLGFBSDZDLENBSTdDVSxhQUFhLENBQWJBLGFBSjZDLENBSzdDYSxVQUFVLENBQUUsYUFBRUMsS0FMK0IsQ0FBOUMsRUFRSUMsUUFURSxDQVNTLENBQ2RDLElBQUksQ0FBRSxLQURRLENBRWRDLE9BQU8sQ0FBRSxzRUFGSyxDQUdkQyxNQUFNLENBQUUsRUFITSxDQVRULENBY04sc0JBQVVuQyxHQUFWLENBQWUsR0FBSW9DLHFCQUFKLENBQWlCZixNQUFNLENBQUNnQixlQUFQLENBQXVCQyxxQkFBeEMsQ0FBK0QsZUFBL0QsQ0FBZ0ZOLFFBQWhGLENBQWYsQ0FBMEcsR0FBMUcsQ0FDQSxDQXZEc0Isc0VBQUgsa0JBQWhCUSxDQUFBQSxnQkFBZ0Isb0RBQXRCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCB7d3JpdGVKc29ufSBmcm9tIFwiLi4vdXRpbHMvd3JpdGVyXCI7XHJcbmltcG9ydCB7cmV0cmlldmVDbGllbnRCYWxhbmNlU2VydmljZX0gZnJvbSBcIi4uL3NlcnZpY2UvQ2xpZW50QmFsYW5jZVNlcnZpY2VcIjtcclxuaW1wb3J0IHV1aWQgZnJvbSBcInV1aWQvdjRcIjtcclxuaW1wb3J0IHtzdHViQ2xpZW50QmFsYW5jZVNlcnZpY2V9IGZyb20gXCIuLi9zZXJ2aWNlL1N0dWJDbGllbnRCYWxhbmNlU2VydmljZVwiO1xyXG5pbXBvcnQge2VtcHR5fSBmcm9tIFwiLi4vdXRpbHMvaGVscGVyXCI7XHJcbmltcG9ydCB7UnVuVGltZUVycm9yfSBmcm9tIFwiLi4vZXJyb3JzXCI7XHJcblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcclxuY29uc3QgZ2V0TWFzdGVyTGlzdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG5cdC8vIFBsZWFzZSB0cmltIHRoZSB2YWx1ZXMgZnJvbSByZXF1ZXN0LiBUaGVyZSBpcyBhIHdlaXJkIGJ1ZyB3aGVyZSBhIHNwYWNlIGlzIGFkZGVkIGZyb20gcmVxdWVzdCBwYWNrYWdlIHdoZW4gY2FsbCBpcyBjb21pbmcgZnJvbSBvdGhlciBtaWNyby1zZXJ2aWNlLlxyXG5cdGxldCBhdXRob3JpemF0aW9uID0gcmVxLnN3YWdnZXIucGFyYW1zW1wiQXV0aG9yaXphdGlvblwiXS52YWx1ZTtcclxuXHRsZXQgYWNjb3VudE51bWJlciA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImFjY291bnROdW1iZXJcIl0udmFsdWU7IC8vIFRyaW0gaW4gZG9uZSBiZWZvcmUgZGIgY2FsbCBvciBya2V5IGNhbGxcclxuXHRsZXQgY29ycmVsYXRpb25JZCA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImNvcnJlbGF0aW9uSWRcIl0udmFsdWU7XHJcblxyXG5cdC8vQ2hlY2sgaWYgc3R1YiBpcyBlbmFibGVkIChTdHViIGZsYWcgaXMgc2V0IGZvciBvbmx5IE5QMSBkZXBsb3kpIERpc2FibGVkIGFzIGRhdGEgaXMgYXZhaWxhYmxlIGluIE5QMS5cclxuXHRsZXQgd2hpY2hTZXJ2aWNlID0gcmV0cmlldmVDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHRpZiAocHJvY2Vzcy5lbnYuU1RVQiA9PT0gXCJ0cnVlXCIpIHtcclxuXHRcdHdoaWNoU2VydmljZSA9IHN0dWJDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHR9XHJcblxyXG5cdGxldCBmblN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblx0bGV0IHRyYW5zYWN0aW9uSWQgPSB1dWlkKCk7XHJcblx0cmVzLnNldEhlYWRlcihcImNvcnJlbGF0aW9uSWRcIiwgY29ycmVsYXRpb25JZCA/IGNvcnJlbGF0aW9uSWQgOiBcIlwiKTtcclxuXHRyZXMuc2V0SGVhZGVyKFwidHJhbnNhY3Rpb25JZFwiLCB0cmFuc2FjdGlvbklkKTtcclxuXHR0cnkge1xyXG5cdFx0bGV0IHJlc3BvbnNlID0gYXdhaXQgd2hpY2hTZXJ2aWNlKGF1dGhvcml6YXRpb24sIGFjY291bnROdW1iZXIsIHRyYW5zYWN0aW9uSWQsIGNvcnJlbGF0aW9uSWQpO1xyXG5cdFx0d3JpdGVKc29uKHJlcywgcmVzcG9uc2UpO1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdGdsb2JhbC5sb2dnZXIuaW5mbyhcIlNlcnZlZCByZXRyaWV2ZUNsaWVudEJhbGFuY2VcIiwge1xyXG5cdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0Y29ycmVsYXRpb25JZFxyXG5cdFx0fSk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdC8vIENyZWF0ZSBhIHByb3BlciBzdHJ1Y3R1cmVkIHJlc3BvbnNlIGFuZCBzZW5kIGl0IHRvIHRoZSBjbGllbnRcclxuXHRcdGlmIChlLmVycm9yUmVzcG9uc2UpIHtcclxuXHRcdFx0bGV0IGVycm9yT2JqZWN0ID0gZS5lcnJvclJlc3BvbnNlO1xyXG5cdFx0XHRlcnJvck9iamVjdC5uYW1lID0gZW1wdHkoZS5uYW1lKSA/IFwiRXhlY3V0aW9uIEVycm9yXCIgOiBlLm5hbWU7XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIGVycm9yT2JqZWN0LCBlLnN0YXR1c0NvZGUpO1xyXG5cdFx0XHRnbG9iYWwubG9nZ2VyLmVycm9yKFwiUHJlZGVmaW5lZCBSdW50aW1lIEVycm9yLlwiLCB7XHJcblx0XHRcdFx0Zm5FbGFwc2VkVGltZSxcclxuXHRcdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRjb3JyZWxhdGlvbklkLFxyXG5cdFx0XHRcdHRyYW5zYWN0aW9uSWQsXHJcblx0XHRcdFx0c3RhY2tUcmFjZTogZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGdsb2JhbC5sb2dnZXIuZXJyb3IoXCJEeW5hbWljIFJ1bnRpbWUgRXJyb3IuXCIsIHtcclxuXHRcdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRcdG9wZXJhdGlvbk5hbWU6IFwiY29udHJvbGxlclwiLFxyXG5cdFx0XHRcdGNvcnJlbGF0aW9uSWQsXHJcblx0XHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0XHRzdGFja1RyYWNlOiBlLnN0YWNrXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bGV0IGVycm9yTXNnID0ge1xyXG5cdFx0XHRcdGNvZGU6IDUwMDAwLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiUnVudGltZSBlcnJvci4gQ29udGFjdCBBUEkgVGVhbSB3aXRoIGNvcnJlbGF0aW9uSWQgYW5kIHRyYW5zYWN0aW9uSWRcIixcclxuXHRcdFx0XHRmaWVsZHM6IFtdXHJcblx0XHRcdH07XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIG5ldyBSdW5UaW1lRXJyb3IoZ2xvYmFsLmh0dHBTdGF0dXNDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsIFwiUnVudGltZSBlcnJvclwiLCBlcnJvck1zZyksIDUwMCk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlTWFzdGVyTGlzdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG5cdC8vIFBsZWFzZSB0cmltIHRoZSB2YWx1ZXMgZnJvbSByZXF1ZXN0LiBUaGVyZSBpcyBhIHdlaXJkIGJ1ZyB3aGVyZSBhIHNwYWNlIGlzIGFkZGVkIGZyb20gcmVxdWVzdCBwYWNrYWdlIHdoZW4gY2FsbCBpcyBjb21pbmcgZnJvbSBvdGhlciBtaWNyby1zZXJ2aWNlLlxyXG5cdGxldCBhdXRob3JpemF0aW9uID0gcmVxLnN3YWdnZXIucGFyYW1zW1wiQXV0aG9yaXphdGlvblwiXS52YWx1ZTtcclxuXHRsZXQgYWNjb3VudE51bWJlciA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImFjY291bnROdW1iZXJcIl0udmFsdWU7IC8vIFRyaW0gaW4gZG9uZSBiZWZvcmUgZGIgY2FsbCBvciBya2V5IGNhbGxcclxuXHRsZXQgY29ycmVsYXRpb25JZCA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImNvcnJlbGF0aW9uSWRcIl0udmFsdWU7XHJcblxyXG5cdC8vQ2hlY2sgaWYgc3R1YiBpcyBlbmFibGVkIChTdHViIGZsYWcgaXMgc2V0IGZvciBvbmx5IE5QMSBkZXBsb3kpIERpc2FibGVkIGFzIGRhdGEgaXMgYXZhaWxhYmxlIGluIE5QMS5cclxuXHRsZXQgd2hpY2hTZXJ2aWNlID0gcmV0cmlldmVDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHRpZiAocHJvY2Vzcy5lbnYuU1RVQiA9PT0gXCJ0cnVlXCIpIHtcclxuXHRcdHdoaWNoU2VydmljZSA9IHN0dWJDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHR9XHJcblxyXG5cdGxldCBmblN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblx0bGV0IHRyYW5zYWN0aW9uSWQgPSB1dWlkKCk7XHJcblx0cmVzLnNldEhlYWRlcihcImNvcnJlbGF0aW9uSWRcIiwgY29ycmVsYXRpb25JZCA/IGNvcnJlbGF0aW9uSWQgOiBcIlwiKTtcclxuXHRyZXMuc2V0SGVhZGVyKFwidHJhbnNhY3Rpb25JZFwiLCB0cmFuc2FjdGlvbklkKTtcclxuXHR0cnkge1xyXG5cdFx0bGV0IHJlc3BvbnNlID0gYXdhaXQgd2hpY2hTZXJ2aWNlKGF1dGhvcml6YXRpb24sIGFjY291bnROdW1iZXIsIHRyYW5zYWN0aW9uSWQsIGNvcnJlbGF0aW9uSWQpO1xyXG5cdFx0d3JpdGVKc29uKHJlcywgcmVzcG9uc2UpO1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdGdsb2JhbC5sb2dnZXIuaW5mbyhcIlNlcnZlZCByZXRyaWV2ZUNsaWVudEJhbGFuY2VcIiwge1xyXG5cdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0Y29ycmVsYXRpb25JZFxyXG5cdFx0fSk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdC8vIENyZWF0ZSBhIHByb3BlciBzdHJ1Y3R1cmVkIHJlc3BvbnNlIGFuZCBzZW5kIGl0IHRvIHRoZSBjbGllbnRcclxuXHRcdGlmIChlLmVycm9yUmVzcG9uc2UpIHtcclxuXHRcdFx0bGV0IGVycm9yT2JqZWN0ID0gZS5lcnJvclJlc3BvbnNlO1xyXG5cdFx0XHRlcnJvck9iamVjdC5uYW1lID0gZW1wdHkoZS5uYW1lKSA/IFwiRXhlY3V0aW9uIEVycm9yXCIgOiBlLm5hbWU7XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIGVycm9yT2JqZWN0LCBlLnN0YXR1c0NvZGUpO1xyXG5cdFx0XHRnbG9iYWwubG9nZ2VyLmVycm9yKFwiUHJlZGVmaW5lZCBSdW50aW1lIEVycm9yLlwiLCB7XHJcblx0XHRcdFx0Zm5FbGFwc2VkVGltZSxcclxuXHRcdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRjb3JyZWxhdGlvbklkLFxyXG5cdFx0XHRcdHRyYW5zYWN0aW9uSWQsXHJcblx0XHRcdFx0c3RhY2tUcmFjZTogZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGdsb2JhbC5sb2dnZXIuZXJyb3IoXCJEeW5hbWljIFJ1bnRpbWUgRXJyb3IuXCIsIHtcclxuXHRcdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRcdG9wZXJhdGlvbk5hbWU6IFwiY29udHJvbGxlclwiLFxyXG5cdFx0XHRcdGNvcnJlbGF0aW9uSWQsXHJcblx0XHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0XHRzdGFja1RyYWNlOiBlLnN0YWNrXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bGV0IGVycm9yTXNnID0ge1xyXG5cdFx0XHRcdGNvZGU6IDUwMDAwLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiUnVudGltZSBlcnJvci4gQ29udGFjdCBBUEkgVGVhbSB3aXRoIGNvcnJlbGF0aW9uSWQgYW5kIHRyYW5zYWN0aW9uSWRcIixcclxuXHRcdFx0XHRmaWVsZHM6IFtdXHJcblx0XHRcdH07XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIG5ldyBSdW5UaW1lRXJyb3IoZ2xvYmFsLmh0dHBTdGF0dXNDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsIFwiUnVudGltZSBlcnJvclwiLCBlcnJvck1zZyksIDUwMCk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgZGVsZXRlTWFzdGVyTGlzdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG5cdC8vIFBsZWFzZSB0cmltIHRoZSB2YWx1ZXMgZnJvbSByZXF1ZXN0LiBUaGVyZSBpcyBhIHdlaXJkIGJ1ZyB3aGVyZSBhIHNwYWNlIGlzIGFkZGVkIGZyb20gcmVxdWVzdCBwYWNrYWdlIHdoZW4gY2FsbCBpcyBjb21pbmcgZnJvbSBvdGhlciBtaWNyby1zZXJ2aWNlLlxyXG5cdGxldCBhdXRob3JpemF0aW9uID0gcmVxLnN3YWdnZXIucGFyYW1zW1wiQXV0aG9yaXphdGlvblwiXS52YWx1ZTtcclxuXHRsZXQgYWNjb3VudE51bWJlciA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImFjY291bnROdW1iZXJcIl0udmFsdWU7IC8vIFRyaW0gaW4gZG9uZSBiZWZvcmUgZGIgY2FsbCBvciBya2V5IGNhbGxcclxuXHRsZXQgY29ycmVsYXRpb25JZCA9IHJlcS5zd2FnZ2VyLnBhcmFtc1tcImNvcnJlbGF0aW9uSWRcIl0udmFsdWU7XHJcblxyXG5cdC8vQ2hlY2sgaWYgc3R1YiBpcyBlbmFibGVkIChTdHViIGZsYWcgaXMgc2V0IGZvciBvbmx5IE5QMSBkZXBsb3kpIERpc2FibGVkIGFzIGRhdGEgaXMgYXZhaWxhYmxlIGluIE5QMS5cclxuXHRsZXQgd2hpY2hTZXJ2aWNlID0gcmV0cmlldmVDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHRpZiAocHJvY2Vzcy5lbnYuU1RVQiA9PT0gXCJ0cnVlXCIpIHtcclxuXHRcdHdoaWNoU2VydmljZSA9IHN0dWJDbGllbnRCYWxhbmNlU2VydmljZTtcclxuXHR9XHJcblxyXG5cdGxldCBmblN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcblx0bGV0IHRyYW5zYWN0aW9uSWQgPSB1dWlkKCk7XHJcblx0cmVzLnNldEhlYWRlcihcImNvcnJlbGF0aW9uSWRcIiwgY29ycmVsYXRpb25JZCA/IGNvcnJlbGF0aW9uSWQgOiBcIlwiKTtcclxuXHRyZXMuc2V0SGVhZGVyKFwidHJhbnNhY3Rpb25JZFwiLCB0cmFuc2FjdGlvbklkKTtcclxuXHR0cnkge1xyXG5cdFx0bGV0IHJlc3BvbnNlID0gYXdhaXQgd2hpY2hTZXJ2aWNlKGF1dGhvcml6YXRpb24sIGFjY291bnROdW1iZXIsIHRyYW5zYWN0aW9uSWQsIGNvcnJlbGF0aW9uSWQpO1xyXG5cdFx0d3JpdGVKc29uKHJlcywgcmVzcG9uc2UpO1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdGdsb2JhbC5sb2dnZXIuaW5mbyhcIlNlcnZlZCByZXRyaWV2ZUNsaWVudEJhbGFuY2VcIiwge1xyXG5cdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0Y29ycmVsYXRpb25JZFxyXG5cdFx0fSk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0bGV0IGZuRWxhcHNlZFRpbWUgPSAoRGF0ZS5ub3coKSAtIGZuU3RhcnRUaW1lKSArIFwibXNcIjtcclxuXHRcdC8vIENyZWF0ZSBhIHByb3BlciBzdHJ1Y3R1cmVkIHJlc3BvbnNlIGFuZCBzZW5kIGl0IHRvIHRoZSBjbGllbnRcclxuXHRcdGlmIChlLmVycm9yUmVzcG9uc2UpIHtcclxuXHRcdFx0bGV0IGVycm9yT2JqZWN0ID0gZS5lcnJvclJlc3BvbnNlO1xyXG5cdFx0XHRlcnJvck9iamVjdC5uYW1lID0gZW1wdHkoZS5uYW1lKSA/IFwiRXhlY3V0aW9uIEVycm9yXCIgOiBlLm5hbWU7XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIGVycm9yT2JqZWN0LCBlLnN0YXR1c0NvZGUpO1xyXG5cdFx0XHRnbG9iYWwubG9nZ2VyLmVycm9yKFwiUHJlZGVmaW5lZCBSdW50aW1lIEVycm9yLlwiLCB7XHJcblx0XHRcdFx0Zm5FbGFwc2VkVGltZSxcclxuXHRcdFx0XHRvcGVyYXRpb25OYW1lOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRjb3JyZWxhdGlvbklkLFxyXG5cdFx0XHRcdHRyYW5zYWN0aW9uSWQsXHJcblx0XHRcdFx0c3RhY2tUcmFjZTogZVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGdsb2JhbC5sb2dnZXIuZXJyb3IoXCJEeW5hbWljIFJ1bnRpbWUgRXJyb3IuXCIsIHtcclxuXHRcdFx0XHRmbkVsYXBzZWRUaW1lLFxyXG5cdFx0XHRcdG9wZXJhdGlvbk5hbWU6IFwiY29udHJvbGxlclwiLFxyXG5cdFx0XHRcdGNvcnJlbGF0aW9uSWQsXHJcblx0XHRcdFx0dHJhbnNhY3Rpb25JZCxcclxuXHRcdFx0XHRzdGFja1RyYWNlOiBlLnN0YWNrXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bGV0IGVycm9yTXNnID0ge1xyXG5cdFx0XHRcdGNvZGU6IDUwMDAwLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiUnVudGltZSBlcnJvci4gQ29udGFjdCBBUEkgVGVhbSB3aXRoIGNvcnJlbGF0aW9uSWQgYW5kIHRyYW5zYWN0aW9uSWRcIixcclxuXHRcdFx0XHRmaWVsZHM6IFtdXHJcblx0XHRcdH07XHJcblx0XHRcdHdyaXRlSnNvbihyZXMsIG5ldyBSdW5UaW1lRXJyb3IoZ2xvYmFsLmh0dHBTdGF0dXNDb2Rlcy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsIFwiUnVudGltZSBlcnJvclwiLCBlcnJvck1zZyksIDUwMCk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuZXhwb3J0IHtnZXRNYXN0ZXJMaXN0LCB1cGRhdGVNYXN0ZXJMaXN0LCBkZWxldGVNYXN0ZXJMaXN0fTsiXX0=